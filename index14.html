<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>è‹±æ–‡æ‹¼å­—éŠæˆ²</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: 'Comic Sans MS', 'DFKai-SB', sans-serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      min-height: 100vh;
      transition: background 0.5s;
    }
    /* ä¸»é¡Œ1ï¼šé»ƒè‰²è—è‰² */
    .theme-yellow-blue {
      background: linear-gradient(135deg, #f9f871 0%, #a1c4fd 100%);
    }
    /* ä¸»é¡Œ2ï¼šç²‰ç´…ç´«è‰² */
    .theme-pink-purple {
      background: linear-gradient(135deg, #ffb6b9 0%, #a18cd1 100%);
    }
    /* ä¸»é¡Œ3ï¼šç¶ è‰²æ©˜è‰² */
    .theme-green-orange {
      background: linear-gradient(135deg, #b2ff59 0%, #ffcc80 100%);
    }
    /* ä¸»é¡Œ4ï¼šè—è‰²ç¶ è‰² */
    .theme-blue-green {
      background: linear-gradient(135deg, #81d4fa 0%, #b2ff59 100%);
    }
    /* ä¸»é¡Œ5ï¼šå½©è™¹ */
    .theme-rainbow {
      background: linear-gradient(120deg, #f6d365 0%, #fda085 20%, #fbc2eb 40%, #a1c4fd 60%, #c2ffd8 80%, #fdc2e6 100%);
    }
    /* å…¶é¤˜æ¨£å¼ç¶­æŒåŸæœ¬ */
    h1 {
      font-size: 2em;
      color: #ff6f61;
      text-shadow: 2px 2px 0 #fff176, 4px 4px 0 #81d4fa;
      margin-bottom: 10px;
    }

    #shuffled {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 10px 0;
    }

    .letter-btn {
      font-size: 28px;
      margin: 8px;
      padding: 14px 20px;
      cursor: pointer;
      min-width: 55px;
      border-radius: 12px;
      background: linear-gradient(135deg, #fff176 60%, #81d4fa 100%);
      border: 2px solid #ffb74d;
      color: #1976d2;
      font-weight: bold;
      box-shadow: 2px 2px 8px #ffd54f88;
      transition: background 0.2s, transform 0.2s;
    }
    .letter-btn:disabled {
      background: #bdbdbd;
      color: #fff;
      opacity: 0.7;
    }

    #answer {
      font-size: 36px;
      margin: 20px 0;
      min-height: 40px;
      color: #388e3c;
      letter-spacing: 8px;
      font-weight: bold;
      text-shadow: 1px 1px 0 #fffde7;
    }

    #result {
      font-size: 26px;
      margin-top: 15px;
      font-weight: bold;
      color: #d84315;
      text-shadow: 1px 1px 0 #fffde7;
    }

    #meaning {
      font-size: 22px;
      margin-bottom: 10px;
      color: #1976d2;
      font-weight: bold;
      text-shadow: 1px 1px 0 #fffde7;
    }

    button {
      margin: 5px;
      padding: 12px 24px;
      font-size: 18px;
      border-radius: 10px;
      background: linear-gradient(135deg, #ffb74d 60%, #81d4fa 100%);
      border: 2px solid #fff176;
      color: #1976d2;
      font-weight: bold;
      box-shadow: 2px 2px 8px #ffd54f88;
      cursor: pointer;
      transition: background 0.2s, transform 0.2s;
    }
    button:hover {
      background: linear-gradient(135deg, #fff176 60%, #81d4fa 100%);
      transform: scale(1.05);
    }

    .volume-control {
      margin: 10px 0 0 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }
    .volume-control label {
      font-size: 16px;
      color: #1976d2;
      font-weight: bold;
    }
    .volume-slider {
      width: 120px;
      accent-color: #ffb74d;
    }
    .theme-select {
      margin-bottom: 10px;
      font-size: 18px;
      border-radius: 8px;
      padding: 6px 12px;
      border: 2px solid #81d4fa;
      background: #fffde7;
      color: #1976d2;
      font-weight: bold;
      box-shadow: 1px 1px 6px #ffd54f44;
    }
      /* ä¸»é¡Œå°æ¯”è‰²è¨­è¨ˆ */
    .theme-yellow-blue button,
    .theme-yellow-blue .letter-btn {
      background: linear-gradient(135deg, #1976d2 60%, #fff176 100%);
      color: #fff;
      border: 2px solid #1976d2;
    }
    .theme-pink-purple button,
    .theme-pink-purple .letter-btn {
      background: linear-gradient(135deg, #a18cd1 60%, #ffb6b9 100%);
      color: #fff;
      border: 2px solid #a18cd1;
    }
    .theme-green-orange button,
    .theme-green-orange .letter-btn {
      background: linear-gradient(135deg, #ff6f00 60%, #b2ff59 100%);
      color: #fff;
      border: 2px solid #ff6f00;
    }
    .theme-blue-green button,
    .theme-blue-green .letter-btn {
      background: linear-gradient(135deg, #00695c 60%, #81d4fa 100%);
      color: #fff;
      border: 2px solid #00695c;
    }
    .theme-rainbow button,
    .theme-rainbow .letter-btn {
      background: linear-gradient(135deg, #d72660 60%, #fbc2eb 100%);
      color: #fff;
      border: 2px solid #d72660;
    }
    /* æç¤ºæŒ‰éˆ•æ¨£å¼ */
    #hintBtn {
      margin-top: 10px;
      font-size: 18px;
      padding: 10px 24px;
    }
    @media (max-width: 600px) {
      .letter-btn {
        font-size: 20px;
        padding: 8px 12px;
        min-width: 40px;
      }

      #answer {
        font-size: 24px;
      }

      #result {
        font-size: 20px;
      }

      #meaning {
        font-size: 18px;
      }

      button {
        font-size: 14px;
        padding: 8px 14px;
      }

      h1 {
        font-size: 1.5em;
      }
      .volume-slider {
        width: 80px;
      }
      .theme-select {
        font-size: 14px;
        padding: 4px 8px;
      }
    }
  </style>
</head>
        <a href="index.html" style="position:absolute;left:10px;top:10px;font-size:24px;text-decoration:none;background:#eee;padding:6px 18px;border-radius:8px;color:#222;box-shadow:0 2px 6px #ccc;">â† è¿”å›é¸å–®</a>
   <div class="container">
<body class="theme-yellow-blue">
  <select id="themeSelect" class="theme-select">
    <option value="theme-yellow-blue">é»ƒè‰²è—è‰²</option>
    <option value="theme-pink-purple">ç²‰ç´…ç´«è‰²</option>
    <option value="theme-green-orange">ç¶ è‰²æ©˜è‰²</option>
    <option value="theme-blue-green">è—è‰²ç¶ è‰²</option>
    <option value="theme-rainbow">å½©è™¹</option>
  </select>
  <h1>è‹±æ–‡æ‹¼å­—éŠæˆ²</h1>
  <div id="coinDisplay" style="font-size:22px;color:#8400db;font-weight:bold;margin-bottom:10px;">
  ğŸ’°é‡‘å¹£ï¼š0
</div>

  <div id="meaning"></div>
  <div id="shuffled"></div>
  <div id="answer"></div>
  <div>
    <button onclick="resetGame()">é‡ç©</button>
    <button onclick="nextWord()">ä¸‹ä¸€é¡Œ</button>
    <button id="hintBtn" onclick="showHint()">æç¤º -50é‡‘å¹£</button>
  </div>
  <div style="margin:10px 0;">
    <button id="replayWordBtn" style="display:none;font-size:18px;padding:8px 18px;">ğŸ”Š é‡æ–°ç™¼éŸ³</button>
    <label style="margin-left:18px;font-size:16px;color:#1976d2;font-weight:bold;">ç™¼éŸ³é€Ÿåº¦</label>
    <input type="range" id="ttsRate" min="0.5" max="1.5" step="0.1" value="0.5" style="width:120px;vertical-align:middle;">
    <span id="rateVal" style="font-size:15px;color:#1976d2;">0.5</span>
  </div>
  <!-- ç™¼éŸ³è²éŸ³å¤§å° -->
  <div class="volume-control">
    <label for="ttsVolume">ç™¼éŸ³éŸ³é‡</label>
    <input type="range" id="ttsVolume" class="volume-slider" min="0" max="1" step="0.01" value="1">
    <span id="ttsVolumeVal" style="font-size:15px;color:#1976d2;">1.00</span>
  </div>



  <!-- éŸ³æ•ˆ -->
  <audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5b24e6cbfb.mp3?filename=button-16.mp3"></audio>
  <audio id="correctSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_64b4179b8a.mp3?filename=success-1-6297.mp3"></audio>
  <audio id="wrongSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c75c7931e6.mp3?filename=error-126627.mp3"></audio>
  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="bgm" src="https://cdn.pixabay.com/audio/2023/03/28/audio_12b6b4e7e7.mp3" loop></audio>

  <script>
  let ttsVolume = 1.0;
  const ttsVolumeSlider = document.getElementById("ttsVolume");
  const ttsVolumeVal = document.getElementById("ttsVolumeVal");
  ttsVolumeSlider.addEventListener("input", function() {
    ttsVolume = parseFloat(this.value);
    ttsVolumeVal.textContent = ttsVolume.toFixed(2);
  });
  ttsVolumeVal.textContent = ttsVolumeSlider.value; // é é¢è¼‰å…¥æ™‚é¡¯ç¤ºåˆå§‹å€¼
  function speak(text, rate = ttsRate) {
    if (!window.speechSynthesis) return;
    window.speechSynthesis.cancel();
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = "en-US";
    utter.rate = rate;
    utter.volume = ttsVolume; // ä¸€å®šè¦åŠ é€™è¡Œï¼Œä¸” ttsVolume è¦æ˜¯ 0~1 çš„æ•¸å­—
    window.speechSynthesis.speak(utter);
  }
  </script>

  <div class="volume-control">
    <label for="bgmVolume">èƒŒæ™¯éŸ³æ¨‚</label>
    <input type="range" id="bgmVolume" class="volume-slider" min="0" max="1" step="0.01" value="0.5">
    <label for="sfxVolume">éŸ³æ•ˆ</label>
    <input type="range" id="sfxVolume" class="volume-slider" min="0" max="1" step="0.01" value="0.7">
  </div>
  <div id="result"></div>

  <!-- éŸ³æ•ˆ -->
  <audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5b24e6cbfb.mp3?filename=button-16.mp3"></audio>
  <audio id="correctSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_64b4179b8a.mp3?filename=success-1-6297.mp3"></audio>
  <audio id="wrongSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c75c7931e6.mp3?filename=error-126627.mp3"></audio>
  <!-- èƒŒæ™¯éŸ³æ¨‚ -->
  <audio id="bgm" src="https://cdn.pixabay.com/audio/2023/03/28/audio_12b6b4e7e7.mp3" loop></audio>

  <script>
function unlockSound() {
  clickSound.play().catch(() => {});
  correctSound.play().catch(() => {});
  wrongSound.play().catch(() => {});
  bgm.play().catch(() => {});

  document.getElementById("startSoundBtn").style.display = "none";
}

// ä¸»é¡Œåˆ‡æ›
document.getElementById("themeSelect").addEventListener("change", function() {
  document.body.className = this.value;
});

// é¡Œåº«æ“´å……åˆ° 50 å€‹
const wordList = [
  { word: "APPLE", meaning: "è˜‹æœ" },
  { word: "HOUSE", meaning: "æˆ¿å­" },
  { word: "TRAIN", meaning: "ç«è»Š" },
  { word: "MOUSE", meaning: "è€é¼ " },
  { word: "PLANE", meaning: "é£›æ©Ÿ" },
  { word: "WATER", meaning: "æ°´" },
  { word: "SCHOOL", meaning: "å­¸æ ¡" },
  { word: "TABLE", meaning: "æ¡Œå­" },
  { word: "CHAIR", meaning: "æ¤…å­" },
  { word: "PENCIL", meaning: "é‰›ç­†" },
  { word: "RULER", meaning: "å°º" },
  { word: "ERASER", meaning: "æ©¡çš®æ“¦" },
  { word: "BREAD", meaning: "éºµåŒ…" },
  { word: "JUICE", meaning: "æœæ±" },
  { word: "CANDY", meaning: "ç³–æœ" },
  { word: "TIGER", meaning: "è€è™" },
  { word: "LION", meaning: "ç…å­" },
  { word: "MONKEY", meaning: "çŒ´å­" },
  { word: "ZEBRA", meaning: "æ–‘é¦¬" },
  { word: "FROG", meaning: "é’è›™" },
  { word: "DUCK", meaning: "é´¨å­" },
  { word: "FISH", meaning: "é­š" },
  { word: "BIRD", meaning: "é³¥" },
  { word: "SNAKE", meaning: "è›‡" },
  { word: "HORSE", meaning: "é¦¬" },
  { word: "SHEEP", meaning: "ç¾Š" },
  { word: "PIG", meaning: "è±¬" },
  { word: "DOG", meaning: "ç‹—" },
  { word: "CAT", meaning: "è²“" },
  { word: "RABBIT", meaning: "å…”å­" },
  { word: "SUN", meaning: "å¤ªé™½" },
  { word: "MOON", meaning: "æœˆäº®" },
  { word: "STAR", meaning: "æ˜Ÿæ˜Ÿ" },
  { word: "CLOUD", meaning: "é›²" },
  { word: "RAIN", meaning: "é›¨" },
  { word: "SNOW", meaning: "é›ª" },
  { word: "WIND", meaning: "é¢¨" },
  { word: "TREE", meaning: "æ¨¹" },
  { word: "FLOWER", meaning: "èŠ±" },
  { word: "GRASS", meaning: "è‰" },
  { word: "CAR", meaning: "æ±½è»Š" },
  { word: "BUS", meaning: "å…¬è»Š" },
  { word: "BIKE", meaning: "è…³è¸è»Š" },
  { word: "BOAT", meaning: "èˆ¹" },
  { word: "PLANT", meaning: "æ¤ç‰©" },
  { word: "BOOK", meaning: "æ›¸" },
  { word: "BAG", meaning: "åŒ…åŒ…" },
  { word: "SHOES", meaning: "é‹å­" },
  { word: "HAT", meaning: "å¸½å­" },
  { word: "DRESS", meaning: "æ´‹è£" }
];

let currentWord = "";
let currentMeaning = "";
let selected = "";

let isCorrect = false; // âœ… è¨­å®šç‹€æ…‹

const clickSound = document.getElementById("clickSound");
const correctSound = document.getElementById("correctSound");
const wrongSound = document.getElementById("wrongSound");
const bgm = document.getElementById("bgm");


// é‡‘å¹£é‚è¼¯
let coins = localStorage.getItem("coins") ? parseInt(localStorage.getItem("coins")) : 100;
updateCoinDisplay();

function updateCoins(change) {
  coins += change;
  if (coins < 0) coins = 0; // ä¸è®“é‡‘å¹£è®Šè² æ•¸
  localStorage.setItem("coins", coins);
  updateCoinDisplay();
}

function updateCoinDisplay() {
  document.getElementById("coinDisplay").textContent = `ğŸ’° é‡‘å¹£ï¼š${coins}`;
}


// éŸ³é‡æ§åˆ¶
const bgmVolume = document.getElementById("bgmVolume");
const sfxVolume = document.getElementById("sfxVolume");
bgm.volume = bgmVolume.value;
clickSound.volume = sfxVolume.value;
correctSound.volume = sfxVolume.value;
wrongSound.volume = sfxVolume.value;

bgmVolume.addEventListener("input", function() {
  bgm.volume = this.value;
});
sfxVolume.addEventListener("input", function() {
  clickSound.volume = this.value;
  correctSound.volume = this.value;
  wrongSound.volume = this.value;
});

function shuffle(array) {
  return array.sort(() => Math.random() - 0.5);
}

let wrongCount = 0;

function displayShuffled() {
  const shuffled = shuffle(currentWord.split(''));
  const container = document.getElementById("shuffled");
  container.innerHTML = "";

  shuffled.forEach(letter => {
    const btn = document.createElement("button");
    btn.textContent = letter;
    btn.className = "letter-btn";
    btn.onclick = () => {
      clickSound.currentTime = 0;
      clickSound.play();

      // speakLetter(letter); // é»å­—æ¯æ™‚ç™¼éŸ³
      selected += letter;
      document.getElementById("answer").textContent = selected;
      btn.disabled = true;

      if (selected.length === currentWord.length) {
        checkAnswer();
      }
    };
    container.appendChild(btn);
  });
}

let ttsRate = 1.0;
const ttsRateSlider = document.getElementById("ttsRate");
const rateVal = document.getElementById("rateVal");
ttsRateSlider.addEventListener("input", function() {
  ttsRate = parseFloat(this.value);
  rateVal.textContent = ttsRate.toFixed(2);
});

// TTS å–®å­—ç™¼éŸ³
function speak(text, rate = ttsRate) {
  if (!window.speechSynthesis) return;
  window.speechSynthesis.cancel();
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = "en-US";
  utter.rate = rate;
  utter.volume = ttsVolume; // ä¸€å®šè¦åŠ é€™è¡Œï¼Œä¸” ttsVolume è¦æ˜¯ 0~1 çš„æ•¸å­—
  window.speechSynthesis.speak(utter);
}

// é»å­—æ¯ç™¼éŸ³
function speakLetter(letter) {
  speak(letter);
}

// å®Œæ•´å–®å­—ç™¼éŸ³
function speakWord() {
  speak(currentWord);
}

// é‡æ–°ç™¼éŸ³æŒ‰éˆ•
document.getElementById("replayWordBtn").onclick = speakWord;

// ä¿®æ”¹ checkAnswerï¼Œæ­£ç¢ºæ™‚è‡ªå‹•ç™¼éŸ³ä¸¦é¡¯ç¤º replay æŒ‰éˆ•
function checkAnswer() {
  const result = document.getElementById("result");
  if (selected === currentWord) {
    result.textContent = "âœ… æ­£ç¢ºï¼ +20 ğŸ’°é‡‘å¹£";
    result.style.color = "green";
    correctSound.currentTime = 0;
    correctSound.play();
    document.getElementById("replayWordBtn").style.display = "inline-block";
    speakWord(); // æ­£ç¢ºå¾Œå®Œæ•´å–®å­—ç™¼éŸ³
     if (isCorrect) return; // å¦‚æœå·²ç¶“ç­”å°å°±ä¸å†åŸ·è¡Œ
         isCorrect = true; // âœ… è¨­å®šç‹€æ…‹ï¼Œè¡¨ç¤ºå·²ç­”å°
       updateCoins(+20); // âœ… ç­”å°åŠ é‡‘å¹£
  
  } else {
    result.textContent = "âŒ éŒ¯èª¤ï¼Œè«‹å†è©¦ä¸€æ¬¡ï¼";
    result.style.color = "red";
    wrongSound.currentTime = 0;
    wrongSound.play();
    document.getElementById("replayWordBtn").style.display = "none";
    
        updateCoins(-10); // âŒ ç­”éŒ¯æ‰£é‡‘å¹£

  }
}

// resetGame æ™‚éš±è— replay æŒ‰éˆ•
function resetGame() {
  selected = "";
  document.getElementById("answer").textContent = "";
  document.getElementById("result").textContent = "";
  document.getElementById("replayWordBtn").style.display = "none";
           isCorrect = false; // âœ… é‡ç½®ç‹€æ…‹

  displayShuffled();
}

// nextWord æ™‚ä¹Ÿéš±è— replay æŒ‰éˆ•
function nextWord() {
  const randomIndex = Math.floor(Math.random() * wordList.length);
  currentWord = wordList[randomIndex].word;
  currentMeaning = wordList[randomIndex].meaning;
  document.getElementById("meaning").textContent = `ä¸­æ–‡æ„æ€ï¼š${currentMeaning}`;
  resetGame();
}

function showHint() {
  if (coins < 50) {
  alert("é‡‘å¹£ä¸è¶³ï¼Œç„¡æ³•ä½¿ç”¨æç¤ºï¼");
  return;
}
  updateCoins(-50); // ğŸ” æç¤ºæ‰£é‡‘å¹£
  document.getElementById("result").textContent = `æç¤ºï¼š${currentWord}`;
  document.getElementById("result").style.color = "#1976d2";
}

// åˆå§‹åŒ–
nextWord();
  </script>
</body>
</html>
