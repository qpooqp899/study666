<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å–®è©æ‹¼å¥ç‹</title>
  <style>
    body {
      font-family: "Comic Sans MS", sans-serif;
      text-align: center;
      padding: 20px;
      background: #fff8e7;
    }
    .image-box {
      margin: 20px 0;
    }
    img {
      max-width: 80%;
      height: auto;
    }
    .word-buttons button {
      font-size: 24px;
      margin: 8px;
      padding: 15px 20px;
      background-color: #ffcc70;
      border: none;
      border-radius: 12px;
      box-shadow: 2px 2px 5px #ccc;
    }
    .word-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 20px;
    }
    .word-buttons button:hover {
      background-color: #ffa500;
      cursor: pointer;
    }
    .output {
      margin-top: 20px;
      font-size: 28px;
      color: #333;
      min-height: 40px;
    }
    .success {
      color: green;
      font-weight: bold;
    }
    button.action {
      font-size: 22px;
      margin: 10px;
      padding: 10px 18px;
      background-color: #a0e7e5;
      border: none;
      border-radius: 10px;
    }
    @media screen and (max-width: 600px) {
      .word-buttons button, button.action {
        font-size: 20px;
        padding: 12px 14px;
      }
    }
  </style>
</head>
<body>
          <a href="index.html" style="position:absolute;left:10px;top:10px;font-size:24px;text-decoration:none;background:#eee;padding:6px 18px;border-radius:8px;color:#222;box-shadow:0 2px 6px #ccc;">â† è¿”å›é¸å–®</a>
   <div class="container">
  <h1>ğŸ§© å–®è©æ‹¼å¥ç‹</h1>

  <!-- æ–°å¢ï¼šé¡¯ç¤ºç›®å‰ç¬¬å¹¾é¡Œ -->
  <div id="progress" style="font-size:20px; color:#1976d2; margin-bottom:10px;"></div>

  <!-- æ–°å¢ï¼šé¡Œç›®é¸æ“‡ä¸‹æ‹‰é¸å–® -->
  <div style="margin-bottom:12px;">
    <label for="questionSelect" style="font-size:16px;">é¸æ“‡é¡Œè™Ÿï¼š</label>
    <select id="questionSelect" style="font-size:16px; padding:3px 8px;"></select>
    <button class="action" onclick="jumpToQuestion()">è·³åˆ°é¡Œç›®</button>
  </div>

  <!-- é¡¯ç¤ºä¸­æ–‡é¡Œç›® -->
  <div class="question" id="chQuestion" style="font-size:26px; margin:20px 0; color:#444;"></div>

  <div class="word-buttons" id="wordButtons"></div>

  <div class="output" id="sentenceOutput"></div>
  <button class="action" onclick="checkSentence()">âœ… æª¢æŸ¥å¥å­/ç™¼éŸ³</button>
  <button class="action" onclick="resetSentence()">ğŸ” é‡è¨­</button>
  <button class="action" id="nextBtn" onclick="nextSentence()" style="display:none;">â¡ï¸ ä¸‹ä¸€é¡Œ</button>
  <div>
    <label for="rateSlider">èªéŸ³é€Ÿåº¦:</label>
    <input type="range" id="rateSlider" min="0.1" max="1.5" step="0.1" value="0.1" /> 
    <span id="rateValue">0.5</span>
  </div>
<div style="font-size:20px; margin: 10px;">
  ğŸ’° é‡‘å¹£ï¼š<span id="coinDisplay">0</span>
</div>

<button class="action" onclick="showHint()">ğŸ’¡ é¡¯ç¤ºç­”æ¡ˆï¼ˆ-50 é‡‘å¹£ï¼‰</button>

  <script>
    document.getElementById("rateSlider").addEventListener("input", function() {
      document.getElementById("rateValue").innerText = this.value;
    }); 



    const sentences = [
        // æ–°å¢çš„ 10 é¡Œ
  { words: ["Dad", "drives", "a", "car"], options: ["Dad", "drives", "a", "car", "bike"], ch: "çˆ¸çˆ¸é–‹è»Š", level: 2 },
  { words: ["She", "drinks", "milk"], options: ["She", "drinks", "milk", "juice", "eats"], ch: "å¥¹å–ç‰›å¥¶", level: 1 },
  { words: ["The", "baby", "is", "crying"], options: ["The", "baby", "is", "crying", "sleeping"], ch: "å¬°å…’åœ¨å“­", level: 2 },
  { words: ["He", "reads", "a", "newspaper"], options: ["He", "reads", "a", "newspaper", "book"], ch: "ä»–åœ¨çœ‹å ±ç´™", level: 2 },
  { words: ["It", "is", "a", "big", "dog"], options: ["It", "is", "a", "big", "dog", "cat"], ch: "é‚£æ˜¯ä¸€éš»å¤§ç‹—", level: 2 },
  { words: ["We", "eat", "lunch", "at", "noon"], options: ["We", "eat", "lunch", "at", "noon", "night"], ch: "æˆ‘å€‘ä¸­åˆåƒåˆé¤", level: 3 },
  { words: ["The", "clock", "is", "ticking"], options: ["The", "clock", "is", "ticking", "stopped"], ch: "æ™‚é˜åœ¨æ»´ç­”ä½œéŸ¿", level: 3 },
  { words: ["I", "see", "a", "bird"], options: ["I", "see", "a", "bird", "fish"], ch: "æˆ‘çœ‹åˆ°ä¸€éš»é³¥", level: 1 },
  { words: ["He", "plays", "the", "piano"], options: ["He", "plays", "the", "piano", "guitar"], ch: "ä»–å½ˆé‹¼ç´", level: 2 },
  { words: ["She", "wears", "a", "hat"], options: ["She", "wears", "a", "hat", "scarf"], ch: "å¥¹æˆ´è‘—å¸½å­", level: 1 },
    { words: ["They", "run", "in", "the", "park"], options: ["They", "run", "in", "the", "park", "school"], ch: "ä»–å€‘åœ¨å…¬åœ’è·‘æ­¥", level: 2 },
  { words: ["The", "girl", "has", "a", "doll"], options: ["The", "girl", "has", "a", "doll", "ball"], ch: "å¥³å­©æœ‰ä¸€å€‹æ´‹å¨ƒå¨ƒ", level: 2 },
  { words: ["We", "eat", "dinner", "at", "home"], options: ["We", "eat", "dinner", "at", "home", "school"], ch: "æˆ‘å€‘åœ¨å®¶åƒæ™šé¤", level: 2 },
  { words: ["He", "draws", "a", "big", "circle"], options: ["He", "draws", "a", "big", "circle", "line"], ch: "ä»–ç•«äº†ä¸€å€‹å¤§åœ“åœˆ", level: 2 },
  { words: ["She", "runs", "with", "her", "dog"], options: ["She", "runs", "with", "her", "dog", "cat"], ch: "å¥¹å’Œç‹—ä¸€èµ·è·‘æ­¥", level: 2 },
  { words: ["The", "kids", "sing", "a", "song"], options: ["The", "kids", "sing", "a", "song", "game"], ch: "å­©å­å€‘å”±æ­Œ", level: 2 },
  { words: ["Dad", "reads", "a", "funny", "book"], options: ["Dad", "reads", "a", "funny", "book", "toy"], ch: "çˆ¸çˆ¸è®€ä¸€æœ¬æœ‰è¶£çš„æ›¸", level: 2 },
  { words: ["I", "watch", "TV", "after", "school"], options: ["I", "watch", "TV", "after", "school", "lunch"], ch: "æˆ‘æ”¾å­¸å¾Œçœ‹é›»è¦–", level: 2 },
  { words: ["She", "writes", "with", "a", "pen"], options: ["She", "writes", "with", "a", "pen", "pencil"], ch: "å¥¹ç”¨ç­†å¯«å­—", level: 2 },
  { words: ["The", "boy", "plays", "with", "blocks"], options: ["The", "boy", "plays", "with", "blocks", "books"], ch: "ç”·å­©ç©ç©æœ¨", level: 2 },
      { words: ["I", "eat", "apple"], options: ["I", "eat", "apple", "banana", "He"], ch: "æˆ‘åƒè˜‹æœ", level: 1 },
  { words: ["The", "dog", "runs"], options: ["The", "dog", "runs", "jumps", "cat"], ch: "ç‹—åœ¨è·‘", level: 1 },
  { words: ["She", "likes", "music"], options: ["She", "likes", "music", "food", "dance"], ch: "å¥¹å–œæ­¡éŸ³æ¨‚", level: 1 },
  { words: ["The", "boy", "jumps"], options: ["The", "boy", "jumps", "runs", "plays"], ch: "ç”·å­©åœ¨è·³", level: 1 },
  { words: ["A", "cat", "sleeps"], options: ["A", "cat", "sleeps", "barks", "eats"], ch: "è²“åœ¨ç¡è¦º", level: 1 },
  { words: ["Children", "play", "outside"], options: ["Children", "play", "outside", "inside", "school"], ch: "å°å­©åœ¨å¤–é¢ç©", level: 2 },
  { words: ["We", "go", "to", "school"], options: ["We", "go", "to", "school", "home"], ch: "æˆ‘å€‘å»å­¸æ ¡", level: 2 },
  { words: ["He", "rides", "a", "bus"], options: ["He", "rides", "a", "bus", "car"], ch: "ä»–æ­å…¬è»Š", level: 2 },
  { words: ["She", "reads", "a", "book"], options: ["She", "reads", "a", "book", "pencil"], ch: "å¥¹åœ¨è®€æ›¸", level: 2 },
  { words: ["He", "has", "an", "apple"], options: ["He", "has", "an", "apple", "banana"], ch: "ä»–æœ‰ä¸€å€‹è˜‹æœ", level: 2 },
  { words: ["I", "kick", "a", "ball"], options: ["I", "kick", "a", "ball", "run"], ch: "æˆ‘è¸¢çƒ", level: 2 },
  { words: ["The", "book", "is", "on", "the", "table"], options: ["The", "book", "is", "on", "the", "table"], ch: "æ›¸åœ¨æ¡Œä¸Š", level: 3 },
  { words: ["It", "is", "ten", "o'clock"], options: ["It", "is", "ten", "o'clock", "now"], ch: "ç¾åœ¨åé»é˜", level: 2 },
  { words: ["Time", "to", "sleep"], options: ["Time", "to", "sleep", "wake", "eat"], ch: "è©²ç¡è¦ºäº†", level: 1 },
  { words: ["The", "sun", "is", "bright"], options: ["The", "sun", "is", "bright", "dark"], ch: "å¤ªé™½å¾ˆæ˜äº®", level: 2 },
  { words: ["We", "live", "in", "a", "house"], options: ["We", "live", "in", "a", "house"], ch: "æˆ‘å€‘ä½åœ¨ä¸€å€‹æˆ¿å­è£¡", level: 3 },
  { words: ["Mom", "cooks", "in", "the", "kitchen"], options: ["Mom", "cooks", "in", "the", "kitchen"], ch: "åª½åª½åœ¨å»šæˆ¿ç…®é£¯", level: 3 },
  { words: ["We", "love", "our", "family"], options: ["We", "love", "our", "family", "friends"], ch: "æˆ‘å€‘æ„›æˆ‘å€‘çš„å®¶åº­", level: 2 },
  { words: ["They", "eat", "ice", "cream"], options: ["They", "eat", "ice", "cream", "cake"], ch: "ä»–å€‘åƒå†°æ·‡æ·‹", level: 2 },
  { words: ["Birds", "live", "in", "trees"], options: ["Birds", "live", "in", "trees", "sky"], ch: "é³¥å…’ä½åœ¨æ¨¹ä¸Š", level: 2 },


    ];

    let sentence = [];
    let currentIndex = 0;
    let isCorrect = false;

    // æ–°å¢ï¼šåˆå§‹åŒ–é¡Œç›®é¸æ“‡ä¸‹æ‹‰é¸å–®
    const questionSelect = document.getElementById("questionSelect");
    sentences.forEach((s, idx) => {
      const opt = document.createElement("option");
      opt.value = idx;
      opt.text = `lv${s.level} ç¬¬ ${idx + 1} é¡Œï¼š${s.ch}`;
      questionSelect.appendChild(opt);
    });

    // æ–°å¢ï¼šè·³åˆ°æŒ‡å®šé¡Œç›®
    function jumpToQuestion() {
      currentIndex = parseInt(questionSelect.value, 10);
      isCorrect = false;




      loadSentence(currentIndex);
      document.getElementById("nextBtn").style.display = "none";
    }

    function updateProgress() {
      document.getElementById("progress").innerText = `ç¬¬ ${currentIndex + 1} / ${sentences.length} é¡Œ`;
      questionSelect.value = currentIndex;
    }

    function checkSentence() {

      const output = document.getElementById("sentenceOutput");
      const correct = sentences[currentIndex].words;


       const today = getToday();

  // å–å¾—ä»Šå¤©å·²å®Œæˆçš„é¡Œç›®è¨˜éŒ„
  let doneData = JSON.parse(localStorage.getItem("doneToday") || "{}");
  let todayDone = doneData[today] || [];

if (JSON.stringify(sentence) === JSON.stringify(correct)) {
  speakSentence(correct.join(" "));
    if (isCorrect) return;

    output.innerHTML = `<span class="success">ğŸ‰ æ­£ç¢ºï¼</span><br>
        <span style="font-size:22px;">${correct.join(" ")}<br>ğŸ‘‰ ${sentences[currentIndex].ch}</span>`;
   

    document.getElementById("nextBtn").style.display = "inline-block";
    isCorrect = true;

    // âœ… å¦‚æœä»Šå¤©é‚„æ²’ç­”å°é€™é¡Œï¼Œå°±çµ¦é‡‘å¹£
    if (!todayDone.includes(currentIndex)) {
      changeCoins(10);
      todayDone.push(currentIndex);
      doneData[today] = todayDone;
      localStorage.setItem("doneToday", JSON.stringify(doneData));
    } else {

      // output.innerHTML += `<br><span style="color:#999;">ä»Šå¤©å·²ç¶“ç­”å°é€™é¡Œï¼Œæ²’æœ‰å†çµ¦é‡‘å¹£å–”ï½</span>`;
    }

  } else {
    output.innerHTML += ' âŒ éŒ¯èª¤ï¼Œå†è©¦ä¸€æ¬¡ï¼';
    changeCoins(-10);
  }
    }

    function nextSentence() {
      currentIndex++;
      if (currentIndex >= sentences.length) {
        currentIndex = 0;
      }
      isCorrect = false;

updateCoinDisplay();

      loadSentence(currentIndex);
      document.getElementById("nextBtn").style.display = "none";
    }


    function updateCoinDisplay() {
        let coins = parseInt(localStorage.getItem('coins')) || 0; // é è¨­100é‡‘å¹£

  document.getElementById("coinDisplay").innerText = coins;
  localStorage.setItem("coins", coins);

}

function changeCoins(amount) {
  let coins = parseInt(localStorage.getItem('coins')) || 0; // é è¨­100é‡‘å¹£

  coins += amount;
  if (coins < 0) coins = 0; // ä¸å…è¨±è² é‡‘å¹£

  // æ›´æ–°é‡‘å¹£é¡¯ç¤º
  localStorage.setItem('coins', coins);

  updateCoinDisplay();
}

    function loadSentence(index) {
      sentence = [];
      if (!isCorrect) {
        document.getElementById("sentenceOutput").innerText = "";
      }
      // é¡¯ç¤ºä¸­æ–‡é¡Œç›®
      document.getElementById("chQuestion").innerText = sentences[index].ch;
      const btnBox = document.getElementById("wordButtons");
      btnBox.innerHTML = "";

      // éš¨æ©Ÿæ’åˆ— options
      const shuffled = sentences[index].options.slice().sort(() => Math.random() - 0.5);

      shuffled.forEach(word => {
        const btn = document.createElement("button");
        btn.innerText = word;
        btn.onclick = () => addWord(word);
        btnBox.appendChild(btn);
      });
      document.getElementById("nextBtn").style.display = "none";
      updateProgress(); // æ–°å¢ï¼šæ›´æ–°é€²åº¦é¡¯ç¤º
    }

    function addWord(word) {
      if (isCorrect) return;
      sentence.push(word);
      document.getElementById("sentenceOutput").innerText = sentence.join(" ");
    }

    function resetSentence() {
      if (isCorrect) return;
      sentence = [];
      document.getElementById("sentenceOutput").innerText = "";
    }

    function speakSentence(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'en-US';
      msg.rate = document.getElementById("rateSlider") ? parseFloat(document.getElementById("rateSlider").value) : 0.8;
      window.speechSynthesis.speak(msg);
    }

        //æç¤º
    function showHint() {
        let coins = parseInt(localStorage.getItem('coins')) || 0; // é è¨­100é‡‘å¹£

  if (coins < 50) {
    alert("é‡‘å¹£ä¸è¶³ï¼Œç„¡æ³•é¡¯ç¤ºæç¤ºï¼");
    return;
  }

  const correct = sentences[currentIndex].words.join(" ");
  document.getElementById("sentenceOutput").innerHTML = `<span style="color:#999;">æç¤ºï¼š${correct}</span>`;
  
  changeCoins(-50); // ğŸ’¸ æç¤ºæ‰£é‡‘å¹£
}

//æ¯æ—¥é‡è¤‡ç­”å°ä¸ç™¼é‡‘å¹£
function getToday() {
  const today = new Date();
  return today.toISOString().split('T')[0]; // ä¾‹å¦‚ "2025-07-12"
}

// window.onload = function() {
  // åˆå§‹åŒ–é‡‘å¹£é¡¯ç¤º 
window.onload = function() {
  let coins = parseInt(localStorage.getItem('coins')) || 0; // é è¨­100é‡‘å¹£
  document.getElementById("coinDisplay").innerText = coins;
  localStorage.setItem("coins", coins); 

   const today = getToday();
  let doneData = JSON.parse(localStorage.getItem("doneToday") || "{}");
  // æ¸…é™¤ä¸æ˜¯ä»Šå¤©çš„ç´€éŒ„
  const cleaned = {};
  if (doneData[today]) {
    cleaned[today] = doneData[today];
  }
  localStorage.setItem("doneToday", JSON.stringify(cleaned));

};

    loadSentence(currentIndex);
  </script>
</body>
</html>

